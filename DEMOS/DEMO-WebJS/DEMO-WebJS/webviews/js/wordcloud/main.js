function getWeightFactor(t){var e=window.devicePixelRatio||1,i=getDataRange(t),a=utils.scale(i,[20,157]),n=document.getElementById("wordcloud"),r=n.width/e,o=n.height/e,d=0,h=[];t.forEach(function(t,e){var i=t[0],n=+t[1],r=Math.abs(Math.sin(a(n)/100)),o=0,l=1;/[\w-]/i.test(i)&&(o=i.match(/[\w-]/gi).length,l=1-.5*o/i.length),d+=r*(i.length*r)*l,h.push(n)});var l=utils.dx(h),u=0;return function(i){var h=t[u][0];i=1.5*Math.round(Math.sin(a(i)/100)*Math.sqrt(r*o/d)),1==e&&(i/=2),3==e&&(i=1.5*i),h.length*i>.9*n.width&&(i=.9*n.width/h.length);var g=n.height/n.width;return 10>=l&&(i*=Math.min(Math.max(.5,g),.6)),i}}function formatData(t){for(var e=t.data,i=[],a=0;a<e.length;a++){var n=e[a];i.push([n.text,n.value])}return i}function getColorScheme(t){var e=t.data,i={},a=t.colors;if(!a.length)return"random-dark";for(var n=0;n<e.length;n++){var r=e[n].text;i[r]=a[n%a.length],9==i[r].length&&(i[r]="#"+i[r].slice(3))}return window.__COLOR_MAP__=i,function(t,e){return i[t]||"#999999"}}function getDataRange(t){t.sort(function(t,e){return e[1]-t[1]});var e=0,i=0;return t.length>0&&(e=t[0][1],i=t[t.length-1][1]),[i,e]}function initChart(){if(WordCloud.isSupported){var t=window.__BDP_CALL_NATIVE__;if(t("initialized",{},""),window.location.search.indexOf("debug")>=0){var e=generateTestData();generateWordCloud(e)}}}function generateTestData(){var t=[{text:"Love",value:12}],e=[10,9,7,6,5],i="Liebe,ፍቅር,Lufu,حب,Aimor,Amor,Heyran,ভালোবাসা,Каханне,Любоў,Любов,བརྩེ་དུང་།,Ljubav,Karantez,Юрату,Láska,Amore,Cariad,Kærlighed,Armastus,Αγάπη,Amo,Amol,Maitasun,عشق,Pyar,Amour,Leafde,Gràdh,愛,爱,પ્રેમ,사랑,Սեր,Ihunanya,Cinta,ᑕᑯᑦᓱᒍᓱᑉᐳᖅ,Ást,אהבה,ಪ್ರೀತಿ,სიყვარული,Махаббат,Pendo,Сүйүү,Mīlestība,Meilė,Leefde,Bolingo,Szerelem,Љубов,സ്നേഹം,Imħabba,प्रेम,Ái,Хайр,အချစ်,Tlazohtiliztli,Liefde,माया,मतिना,Kjærlighet,Kjærleik,ପ୍ରେମ,Sevgi,ਪਿਆਰ,پیار,Miłość,Leevde,Dragoste,Khuyay,Любовь,Таптал,Dashuria,Amuri,ආදරය,Ljubezen,Jaceyl,خۆشەویستی,Љубав,Rakkaus,Kärlek,Pag-ibig,காதல்,ప్రేమ,ความรัก,Ишқ,Aşk,محبت,Tình yêu,Higugma,ליבע".split(",");i.forEach(function(i,a){var n=e[a%e.length];t.push({text:i,value:n})});var a={data:[{text:"福建省",value:22},{text:"安徽省",value:22},{text:"甘肃省",value:1}],colors:[]};return a}window.setChartData=function(t){generateWordCloud(t)},window.generateWordCloud=function(t){var e=window.devicePixelRatio||1,i=formatData(t);window.WordCloudlist=i;var a=getColorScheme(t),n=document.getElementById("wordcloud"),r=n.getBoundingClientRect();n.width=r.width*e,n.height=r.height*e;var o={list:i,shuffle:!1,rotateRatio:1,customRotations:[-Math.PI/2,Math.PI/2],gridSize:Math.round(16*Math.max(n.width,n.height)/1024)*Math.max(1,3-.1*i.length),weightFactor:getWeightFactor(i),fontFamily:"Arial, Helvetica, Microsoft Yahei, sans-serif",color:a,ellipticity:n.height/n.width,click:function(t){var e=[{text:t[0],value:t[1],color:window.__COLOR_MAP__[t[0]]}],i=window.__BDP_CALL_NATIVE__;i("selectChartItems",{items:e},"")}};new WordCloud(n,o),window._hasBindEvent||(n.addEventListener("wordcloudstartrender",function(t){var e=window.__BDP_CALL_NATIVE__;e("startRender",{},"")}),n.addEventListener("wordcloudstop",function(t){var e=window.__BDP_CALL_NATIVE__;e("rendered",{},"")}),window.addEventListener("resize",function(t){var i=document.getElementById("wordcloud"),a=i.getBoundingClientRect();i.width=a.width*e,i.height=a.height*e;var n=window.WordCloudlist;o.list=n,o.gridSize=Math.round(16*Math.max(i.width,i.height)/1024)*Math.max(1,3-.1*n.length),o.weightFactor=getWeightFactor(n),o.ellipticity=i.height/i.width,new WordCloud(i,o)}),window._hasBindEvent=!0)},initChart();